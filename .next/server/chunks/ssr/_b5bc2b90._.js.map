{"version":3,"sources":["../../../../src/components/ui/card.tsx","../../../../node_modules/%40radix-ui/react-use-previous/src/usePrevious.tsx","../../../../src/components/TshirtCard.tsx","../../../../src/components/ui/image-popup.tsx","../../../../src/components/ui/product-quick-view.tsx","../../../../src/hooks/useProductVariants.ts"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h3\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <p\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n","import * as React from 'react';\n\nfunction usePrevious<T>(value: T) {\n  const ref = React.useRef({ value, previous: value });\n\n  // We compare values before making an update to ensure that\n  // a change has been made. This ensures the previous value is\n  // persisted correctly between renders.\n  return React.useMemo(() => {\n    if (ref.current.value !== value) {\n      ref.current.previous = ref.current.value;\n      ref.current.value = value;\n    }\n    return ref.current.previous;\n  }, [value]);\n}\n\nexport { usePrevious };\n","'use client';\n\n\nimport { useState } from \"react\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Eye, ShoppingCart, Check } from \"lucide-react\";\n\nimport { useUser } from \"@/contexts/UserContext\";\nimport { useCart } from \"@/contexts/CartContext\";\nimport { ImagePopup } from \"@/components/ui/image-popup\";\nimport { ProductQuickView } from \"@/components/ui/product-quick-view\";\nimport { supabase } from \"@/integrations/supabase/client\";\n\ninterface TshirtCardProps {\n  id: number;\n  name: string;\n  price: string;\n  image: string;\n  colorOptions?: string[];\n}\n\nconst TshirtCard = ({ id, name, price, image, colorOptions = [\"#FFFFFF\", \"#000000\", \"#DC2626\"] }: TshirtCardProps) => {\n  const [selectedColor, setSelectedColor] = useState(colorOptions[0]);\n  const [isAdding, setIsAdding] = useState(false);\n  const [justAdded, setJustAdded] = useState(false);\n  const { isAuthenticated } = useUser();\n  const { addToCart } = useCart();\n\n  const handleAddToCart = async () => {\n    if (!isAuthenticated) {\n      console.log(\"ðŸ”’ User not authenticated for cart action\");\n      return;\n    }\n\n    try {\n      console.log(\"ðŸ›’ Adding item to cart:\", { id, name, selectedColor });\n      setIsAdding(true);\n\n      // Get the product ID first\n      const { data: products, error: productError } = await supabase\n        .from('products')\n        .select('id')\n        .order('created_at')\n        .limit(1)\n        .range(id - 1, id - 1);\n\n      if (productError || !products || products.length === 0) {\n        throw new Error('Product not found');\n      }\n\n      // Find the corresponding variant for the selected color and default size (M)\n      const { data: variant, error } = await supabase\n        .from('product_variants')\n        .select('id')\n        .eq('product_id', (products[0] as any).id)\n        .eq('color_hex', selectedColor as any)\n        .eq('size', 'M' as any)\n        .single();\n\n      if (error || !variant) {\n        throw new Error('Product variant not found');\n      }\n\n      await addToCart((variant as any).id);\n\n      // Show success state briefly\n      setJustAdded(true);\n      console.log(\"âœ… Item added to cart successfully\");\n      setTimeout(() => setJustAdded(false), 2000);\n    } catch (error) {\n      console.error(\"âŒ Failed to add item to cart:\", error);\n    } finally {\n      setIsAdding(false);\n    }\n  };\n\n  const getButtonContent = () => {\n    if (isAdding) return { icon: ShoppingCart, text: \"Adding...\" };\n    if (justAdded) return { icon: Check, text: \"Added!\" };\n    return { icon: ShoppingCart, text: \"Add to cart\" };\n  };\n\n  const buttonContent = getButtonContent();\n\n  // Color name mapping for better UX\n  const getColorName = (color: string) => {\n    const colorNames: Record<string, string> = {\n      \"#FFFFFF\": \"White\",\n      \"#000000\": \"Black\",\n      \"#DC2626\": \"Red\",\n      \"#0000FF\": \"Blue\",\n      \"#8A898C\": \"Grey\"\n    };\n    return colorNames[color] || \"Color\";\n  };\n\n  return (\n    <Card className=\"overflow-hidden group bg-white\" data-testid={`tshirt-card-${id}`}>\n      <div className=\"relative pb-[125%] overflow-hidden\">\n        <ImagePopup image={image} alt={name}>\n          <img\n            src={image}\n            alt={name}\n            className=\"absolute inset-0 w-full h-full object-cover object-center transition-transform duration-300 group-hover:scale-105 cursor-pointer\"\n          />\n        </ImagePopup>\n        <div className=\"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors duration-300 pointer-events-none\"></div>\n        <div className=\"absolute bottom-0 left-0 right-0 p-4 translate-y-full group-hover:translate-y-0 transition-transform duration-300 flex gap-2 justify-center\">\n          <ProductQuickView\n            product={{ id: id.toString(), name, price, image, colorOptions }}\n            onAddToCart={(variantId: string, quantity?: number) => handleAddToCart()}\n          >\n            <Button variant=\"secondary\" size=\"sm\" className=\"opacity-90 flex items-center gap-1\">\n              <Eye size={16} />\n              <span>Quick view</span>\n            </Button>\n          </ProductQuickView>\n          <Button\n            size=\"sm\"\n            className={`opacity-90 flex items-center gap-1 transition-colors ${justAdded ? 'bg-green-600 hover:bg-green-700' : ''\n              }`}\n            onClick={handleAddToCart}\n            disabled={isAdding || !isAuthenticated}\n            data-testid=\"add-to-cart-button\"\n          >\n            <buttonContent.icon size={16} />\n            <span>{buttonContent.text}</span>\n          </Button>\n        </div>\n      </div>\n      <CardContent className=\"pt-4\">\n        <ProductQuickView\n          product={{ id: id.toString(), name, price, image, colorOptions }}\n          onAddToCart={(variantId: string, quantity?: number) => handleAddToCart()}\n        >\n          <h3 className=\"font-medium hover:text-blue-600 transition-colors cursor-pointer\">{name}</h3>\n        </ProductQuickView>\n        <p className=\"text-lg font-medium mt-1\">{price}</p>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default TshirtCard;\n","import { Dialog, DialogContent, DialogTrigger } from \"@/components/ui/dialog\";\nimport { ReactNode } from \"react\";\n\ninterface ImagePopupProps {\n  children: ReactNode;\n  image: string;\n  alt: string;\n}\n\nexport const ImagePopup = ({ children, image, alt }: ImagePopupProps) => {\n  return (\n    <Dialog>\n      <DialogTrigger asChild>\n        {children}\n      </DialogTrigger>\n      <DialogContent className=\"max-w-3xl w-full max-h-[90vh] p-0\">\n        <div className=\"relative\">\n          <img \n            src={image} \n            alt={alt}\n            className=\"w-full h-auto object-contain rounded-lg\"\n          />\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n};","import { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { ShoppingCart } from \"lucide-react\";\nimport { ReactNode, useState } from \"react\";\nimport { useProductVariants } from \"@/hooks/useProductVariants\";\nimport { toast } from \"@/hooks/use-toast\";\n\ninterface ProductQuickViewProps {\n  children: ReactNode;\n  product: {\n    id: string;\n    name: string;\n    price: string;\n    image: string;\n    colorOptions?: string[];\n  };\n  onAddToCart: (variantId: string, quantity?: number) => void;\n}\n\nexport const ProductQuickView = ({ children, product, onAddToCart }: ProductQuickViewProps) => {\n  const [selectedColor, setSelectedColor] = useState<string>(\"\");\n  const [quantity, setQuantity] = useState(1);\n  const { sizes, colors, loading, selectedSize, setSelectedSize, checkStock } = useProductVariants(product.id);\n\n  const handleAddToCart = async () => {\n    if (!selectedSize) {\n      toast({\n        title: \"Please select a size\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    const selectedVariant = colors.find(color => \n      selectedColor ? color.color_hex === selectedColor : color.variant_id\n    );\n\n    if (!selectedVariant) {\n      toast({\n        title: \"Product not available\",\n        description: \"Selected size/color combination is not available\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    // Check stock before adding to cart\n    const hasStock = await checkStock(selectedVariant.variant_id, quantity);\n    if (!hasStock) {\n      toast({\n        title: \"Out of stock\",\n        description: \"This item is currently out of stock\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    onAddToCart(selectedVariant.variant_id, quantity);\n  };\n\n  return (\n    <Dialog>\n      <DialogTrigger asChild>\n        {children}\n      </DialogTrigger>\n      <DialogContent className=\"max-w-2xl\">\n        <DialogHeader>\n          <DialogTitle>{product.name}</DialogTitle>\n        </DialogHeader>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n          <div className=\"aspect-square\">\n            <img \n              src={product.image} \n              alt={product.name}\n              className=\"w-full h-full object-cover rounded-lg\"\n            />\n          </div>\n          <div className=\"space-y-4\">\n            <div>\n              <h3 className=\"text-xl font-semibold\">{product.name}</h3>\n              <p className=\"text-2xl font-bold text-primary mt-2\">{product.price}</p>\n            </div>\n            \n            <div>\n              <h4 className=\"font-medium mb-2\">Description</h4>\n              <p className=\"text-muted-foreground text-sm\">\n                Premium quality t-shirt made from 100% cotton. Comfortable fit with excellent durability and softness.\n              </p>\n            </div>\n\n            <div>\n              <h4 className=\"font-medium mb-2\">Size</h4>\n              <Select value={selectedSize} onValueChange={setSelectedSize} disabled={loading}>\n                <SelectTrigger className=\"w-full\">\n                  <SelectValue placeholder={loading ? \"Loading sizes...\" : \"Select size\"} />\n                </SelectTrigger>\n                <SelectContent>\n                  {sizes.map((size) => (\n                    <SelectItem \n                      key={size.size} \n                      value={size.size}\n                      disabled={size.available_stock === 0}\n                    >\n                      {size.size} {size.available_stock === 0 ? \"(Out of Stock)\" : `(${size.available_stock} available)`}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n\n            {selectedSize && colors.length > 0 && (\n              <div>\n                <h4 className=\"font-medium mb-2\">Color</h4>\n                <Select value={selectedColor} onValueChange={setSelectedColor}>\n                  <SelectTrigger className=\"w-full\">\n                    <SelectValue placeholder=\"Select color\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {colors.map((color) => (\n                      <SelectItem \n                        key={color.variant_id} \n                        value={color.color_hex}\n                        disabled={color.stock_quantity === 0}\n                      >\n                        <div className=\"flex items-center gap-2\">\n                          <div \n                            className=\"w-4 h-4 rounded border\"\n                            style={{ backgroundColor: color.color_hex }}\n                          />\n                          {color.color_name} ({color.stock_quantity} available)\n                        </div>\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n            )}\n\n            <div>\n              <h4 className=\"font-medium mb-2\">Quantity</h4>\n              <Select value={quantity.toString()} onValueChange={(value) => setQuantity(parseInt(value))}>\n                <SelectTrigger className=\"w-full\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  {[1, 2, 3, 4, 5].map((num) => (\n                    <SelectItem key={num} value={num.toString()}>\n                      {num}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n            \n            <Button\n              onClick={handleAddToCart}\n              className=\"w-full flex items-center gap-2\"\n              disabled={!selectedSize || loading}\n            >\n              <ShoppingCart size={20} />\n              Add to Cart\n            </Button>\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n};","'use client';\n\nimport { useState, useEffect } from 'react';\nimport { supabase } from '@/integrations/supabase/client';\n\ninterface ProductSize {\n  size: string;\n  available_stock: number;\n}\n\ninterface ProductColor {\n  color_name: string;\n  color_hex: string;\n  stock_quantity: number;\n  variant_id: string;\n}\n\nexport function useProductVariants(productId: string) {\n  const [sizes, setSizes] = useState<ProductSize[]>([]);\n  const [colors, setColors] = useState<ProductColor[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [selectedSize, setSelectedSize] = useState<string>('');\n\n  // Fetch available sizes for the product\n  useEffect(() => {\n    if (!productId) return;\n\n    const fetchSizes = async () => {\n      setLoading(true);\n      try {\n        const { data, error } = await supabase.rpc('get_product_sizes', {\n          product_uuid: productId\n        });\n\n        if (error) {\n          console.error('Error fetching product sizes:', error);\n          return;\n        }\n\n        setSizes((data as any) || []);\n        // Auto-select first available size\n        if (data && (data as any).length > 0) {\n          setSelectedSize((data as any)[0].size);\n        }\n      } catch (error) {\n        console.error('Error fetching product sizes:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchSizes();\n  }, [productId]);\n\n  // Fetch available colors when size changes\n  useEffect(() => {\n    if (!productId || !selectedSize) return;\n\n    const fetchColors = async () => {\n      try {\n        const { data, error } = await supabase.rpc('get_product_colors', {\n          product_uuid: productId,\n          size_param: selectedSize\n        });\n\n        if (error) {\n          console.error('Error fetching product colors:', error);\n          return;\n        }\n\n        setColors((data as any) || []);\n      } catch (error) {\n        console.error('Error fetching product colors:', error);\n      }\n    };\n\n    fetchColors();\n  }, [productId, selectedSize]);\n\n  const checkStock = async (variantId: string, quantity: number = 1): Promise<boolean> => {\n    try {\n      const { data, error } = await supabase.rpc('check_variant_stock', {\n        variant_uuid: variantId,\n        requested_quantity: quantity\n      });\n\n      if (error) {\n        console.error('Error checking stock:', error);\n        return false;\n      }\n\n      return data as boolean;\n    } catch (error) {\n      console.error('Error checking stock:', error);\n      return false;\n    }\n  };\n\n  return {\n    sizes,\n    colors,\n    loading,\n    selectedSize,\n    setSelectedSize,\n    checkStock\n  };\n}"],"names":[],"mappings":"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"}