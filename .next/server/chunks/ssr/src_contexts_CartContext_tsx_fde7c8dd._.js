module.exports=[35911,75368,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(35475),e=a.i(74167),f=a.i(69769);let g={src:a.i(86722).default,width:1024,height:1536,blurWidth:5,blurHeight:8,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAICAIAAAC+k6JsAAAAWklEQVR42j2NUQrAMAhDvf8xC+usRmu7Cyzdx0CEx4tGdsUq1PSZljFkL7JX2ozBkWdlhgZutwvWj4cT+tA27ibPzoBSmjbYdTzPyPThX57PEgrv3LILfx+DL7LIbqDg/KiOAAAAAElFTkSuQmCC"},h={src:a.i(444).default,width:1333,height:2e3,blurWidth:5,blurHeight:8,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAICAYAAAAx8TU7AAAApElEQVR42i2NPQrCQBSEn5sQZH9Y90fcTdyNWgiCR7D0AlrYeBAbO0uv4BU8jDcQsUqVXl18gQy84s0M3wCgBihjjM6yjEBvDDnnhxDCSSl1JIRwKIpi651v6lh/57NFi4U9UErP3rlPmIYUQ/xpbS6Q5/nGWtu4iUtVWbVY2gHC12qk3sbYhJgn4paduZJSvjBIY2sf+DvAtZIxdsO7CyGu3fofya0akZaeCKoAAAAASUVORK5CYII="},i={src:a.i(73320).default,width:1024,height:1024,blurWidth:8,blurHeight:8,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAAyElEQVR42g2Ora7CMBhA+2pccx8Ee3ODwOIQaIIkJJAACgWBBQgCQWBAO7au3dd2P7RbBzwFTY474hz0tuZVFiaPc0EcGRDJQ8Ej9La6NlBmQcU8IOtcYsVvgofoVaVWM32ayOFPt/178KaK+4Jh9KmN1YBH3UWz0W82lvNBQn2ZUCfK2qSXzbzX+Wt1/pfbBTCiIHYN40Rw3R+92W41xmcPGBacorp8Wq2KLFQqALhLuHN6S+IQVTo3hXimUaEe7tUt0YfPIvIFgSCYeI8ZX2UAAAAASUVORK5CYII="},j={src:a.i(91930).default,width:1024,height:1024,blurWidth:8,blurHeight:8,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAA00lEQVR42gHIADf/AOLe2bq2sllYVUdGRERDQVtZVrayrNXRygDFwb1FREEvLCVKRThPSTwxLidIR0S+urQAfnx5GhkXbGRQrZ9+raB9a2NPGRgWf3x3AM/LxmNiX3JpVa+if4yBZm1lUWVjX8bCuwDh3diRjoprY1CajnCUiWtxaFSYlY/U0MkA4NzXioeEXldGmY1vlIhrXVZFk5CL08/IAN7a1YSCfiMiHS8sJS4sJCIhHI+Mh9LOxwDd2dOTkIw+PTo8Ojg6OTc+PDqbl5LRzcZ2CFt9mCYnSgAAAABJRU5ErkJggg=="},k={src:a.i(88473).default,width:1024,height:1536,blurWidth:5,blurHeight:8,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAICAIAAAC+k6JsAAAAi0lEQVR42gGAAH//AOPf293Z1tfU0dfU0NrW0ADOz8+LmqZ7jJyIlqLGxsUAlaOvYnqOan6PXnaLjZqkAMLFyGp+j0ddcGZ7jru8vQDQ0NCIlqB1hI5rf5DKycUAzc7NcIWXX3eMb4KSyMbDANjV0ra6va+0t7K1ts/LxQDc2NLa1tDY08zUz8jRzMUMWFE46xz1ggAAAABJRU5ErkJggg=="},l={src:a.i(52951).default,width:2048,height:2048,blurWidth:8,blurHeight:8,blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAgAAAQABAAD/wAARCAAIAAgDAREAAhEBAxEB/9sAQwAKBwcIBwYKCAgICwoKCw4YEA4NDQ4dFRYRGCMfJSQiHyIhJis3LyYpNCkhIjBBMTQ5Oz4+PiUuRElDPEg3PT47/9sAQwEKCwsODQ4cEBAcOygiKDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwDcSx1gfFcwm91k2O7zfNLnyfu7tnTbjPFAH//Z"},m={src:a.i(54895).default,width:2048,height:2048,blurWidth:8,blurHeight:8,blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAgAAAQABAAD/wAARCAAIAAgDAREAAhEBAxEB/9sAQwAKBwcIBwYKCAgICwoKCw4YEA4NDQ4dFRYRGCMfJSQiHyIhJis3LyYpNCkhIjBBMTQ5Oz4+PiUuRElDPEg3PT47/9sAQwEKCwsODQ4cEBAcOygiKDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwB5hvv+FwfZ/t115Xmebu5242btnpjtWt/dJ6n/2Q=="},n={src:a.i(87503).default,width:1024,height:1536,blurWidth:5,blurHeight:8,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAICAIAAAC+k6JsAAAAi0lEQVR42gGAAH//APPx7fLw7fHw7PDv6/Du6gDx7+vX1dHIx8LU0s7t6+cA1NLOnpyVlZONmZaQysjDANDOyZyak5eVjpeVjsPBuwDs6+eqqKKWlI2mpJzm5N8A6+rmqaehlJKLo6Ga5+XgAO/t6dDOyMfEv8zKxOzq5QDz8e3y8O3x8Ozx7+vw7uq9JV8ke7aTJAAAAABJRU5ErkJggg=="},o={src:a.i(71325).default,width:2048,height:2048,blurWidth:8,blurHeight:8,blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAgAAAQABAAD/wAARCAAIAAgDAREAAhEBAxEB/9sAQwAKBwcIBwYKCAgICwoKCw4YEA4NDQ4dFRYRGCMfJSQiHyIhJis3LyYpNCkhIjBBMTQ5Oz4+PiUuRElDPEg3PT47/9sAQwEKCwsODQ4cEBAcOygiKDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwDqMa+PiX5X2i++wb92/afJ27M7cdPbNdnuex8zm9/2vkf/2Q=="},p={src:a.i(78434).default,width:771,height:948,blurWidth:7,blurHeight:8,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAICAYAAAA1BOUGAAAA5UlEQVR42h2OvWqEUBSE76YRf1GwsJCgWEqC4gtsymBt4xuIIBZCCptgkUgIQSSpt08VC98lgbCF2Gy9jcuqs/duceAw55s5Q4ZhsNu2fQnD8M+7v5settv/pmmex3G8JXme7zzPm4MggOu6oDt83z8XRbEjVPg1DONk2zYsy4LjOGwmCuxJ13VhFEXfiqJAVVXouo44jn/6vn8k67oSGvEuCAJEUYSmaaiq6hUAIcuybNI0/eR5HgyQZRllWb4x0/WYJMkXx3FggCRJoCVbppN5nm+yLPugP480djJN81DX9RN1bi4AAGSQYAwJDAAAAABJRU5ErkJggg=="},q={src:a.i(10436).default,width:1443,height:1520,blurWidth:8,blurHeight:8,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAA4klEQVR42kWOO1IDMRBEVeADUBBwB7gBKSkBFyIhgNM44gSkDkjIYI293o+FWP21knYlPIxIHEzQ1a9eDzkcYDF6f8elXrbt3q6rjedCvYQQ7wFgQWKcbtkga6EsWOfBjQGMHcFaV6eUb8gg1Ctlw9T1NJfS+whKm8yFiM6NS+J8eDTWPWx37U5piwZfgE4b8+xDeCK4c5Jyvmza/n3gCvUWpNI96q+xOy0AyTmfbetmRRkHITXgkzSldFW6fwDDefW1eev2DNiPxBN0nucjgOHio1qvmo7+0m8eEPicprlMkD9uDty07/6BjAAAAABJRU5ErkJggg=="},r={src:a.i(96443).default,width:612,height:612,blurWidth:8,blurHeight:8,blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAgAAAQABAAD/wAARCAAIAAgDAREAAhEBAxEB/9sAQwAKBwcIBwYKCAgICwoKCw4YEA4NDQ4dFRYRGCMfJSQiHyIhJis3LyYpNCkhIjBBMTQ5Oz4+PiUuRElDPEg3PT47/9sAQwEKCwsODQ4cEBAcOygiKDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwDfK33/AAtQWn2+78vf5m7Jxjbu2emO1YWftD6C9P8As7m5Vf8A4Nrn/9k="},s={src:a.i(6839).default,width:5902,height:6e3,blurWidth:8,blurHeight:8,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAA70lEQVR42h2Ou27CQBBFVyIp0kWKlJ9KpEgBL36C1zY2tjGPkoIeUYEoEBUF4mX4AFoqU/EH0Bk3YBpEyTDeYpqZc89c4lbsD7OsU4sZO1GgkVgQDmVF3UoCVVRR+iJ1z+/6TjV1TAtswwRLZ4ABkGnxrqvalDCtNMLEw7MdQBuHKsyAYr5wQ6hHcPlN//P9wPWemSVLZ/P387tCwyc5HU9k2B90WkGdH9AIaARTZ+E+it4JAJDFbN5u1gIOaJLMx7Wd+Tk+v3EgXK7aDb/Gf2N7KMkK+FV3EsdxjgObcN1CwwU7XBFIUZ/iy3GSJLkXGKyD6fQMdB0AAAAASUVORK5CYII="},t={src:a.i(24140).default,width:360,height:360,blurWidth:8,blurHeight:8,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAzElEQVR42lWOywqCUBRF1YZWEPYy05m97F4rn2kGDSIULWsa/U0kTfyBfiYIf6fGNdC8hpB7ds5ZrLMxLA2ehixX21Sju6xRtEWSlSbaYXlaNCeLqvMYy95rNLOfUNncmy1Wyo4EQeADuAgm80MMNT+B2i4RdT8eAvOcWRDAsLwrqnaEAKBuEyCvI4bjPRwnfm8Q2B+bgajvM2AAzMt/hQzgBeOaG4bQCgsl0dATjFCQnTdQ3I8wXd1KaQoGqk7DDssfGa53ohodKTd8AacLLHWYEGCNAAAAAElFTkSuQmCC"};a.i(95317).default,a.i(43463).default;let u={mockup1:g,mockup2:h,mockup3:i,mockup4:j,mockup5:k,mockup6:l,mockup7:m,mockup8:n,mockup9:o};a.s(["tshirtColors",0,{black:p,white:q,red:r,grey:s,blue:t},"tshirtImages",0,u],75368);let v=(0,c.createContext)(void 0);a.s(["CartProvider",0,({children:a})=>{let g=null,h=!1;try{let a=(0,d.useUser)();g=a.user,h=a.isAuthenticated}catch(a){console.warn("CartProvider: UserContext not ready yet, using defaults")}let[i,j]=(0,c.useState)([]),[k,l]=(0,c.useState)([]),[m,n]=(0,c.useState)(!1),o=(0,c.useMemo)(()=>[{id:"1",name:"Classic White Tee",price:"â‚¹2,070",image:u.mockup1},{id:"2",name:"Urban Black Design",price:"â‚¹2,490",image:u.mockup2},{id:"3",name:"Summer Collection",price:"â‚¹2,240",image:u.mockup3},{id:"4",name:"Vintage Edition",price:"â‚¹2,740",image:u.mockup4},{id:"5",name:"Modern Minimalist",price:"â‚¹2,320",image:u.mockup5},{id:"6",name:"Artist Series",price:"â‚¹2,900",image:u.mockup6},{id:"7",name:"Classic Blue Tee",price:"â‚¹2,070",image:u.mockup1},{id:"8",name:"Urban Gray Design",price:"â‚¹2,490",image:u.mockup2},{id:"9",name:"Winter Collection",price:"â‚¹2,240",image:u.mockup3}],[]),p=(0,c.useCallback)(async()=>{if(!g)return void j([]);try{n(!0),console.log("ðŸ”„ Fetching cart items for user:",g.id);let{data:a,error:b}=await e.supabase.from("cart_items").select("id, user_id, product_id, variant_id, quantity, created_at, updated_at, selected_color, selected_size").eq("user_id",g.id).order("created_at",{ascending:!1});if(b)throw b;let c=(a||[]).map(a=>{let b=o.find(b=>b.id===a.product_id);return{...a,product:b}})||[];console.log("ðŸ“¦ Cart items fetched:",c),j(c)}catch(a){console.error("Error fetching cart items:",a)}finally{n(!1)}},[g,o]),q=(0,c.useCallback)(async()=>{if(!g)return void l([]);try{console.log("ðŸ”„ Fetching custom designs for user:",g.id);let{data:a,error:b}=await e.supabase.from("custom_designs").select("id, design_name, design_image, tshirt_color, base_price, theme_name, answers, design_data, created_at").eq("user_id",g.id).order("created_at",{ascending:!1});if(b)throw b;console.log("ðŸŽ¨ Custom designs fetched:",a);let c=(a||[]).map(a=>({...a,design_data:a.design_data||{},answers:Array.isArray(a.answers)?a.answers:"string"==typeof a.answers?JSON.parse(a.answers):[]}));l(c)}catch(a){console.error("Error fetching custom designs:",a)}},[g]);(0,c.useEffect)(()=>{if(h&&g){p(),q(),console.log("ðŸ“¡ Setting up cart real-time subscription");let a=e.supabase.channel("cart-realtime").on("postgres_changes",{event:"*",schema:"public",table:"cart_items",filter:`user_id=eq.${g.id}`},a=>{console.log("ðŸ“± Cart realtime update:",a),p()}).subscribe();return()=>{console.log("ðŸ“¡ Cleaning up cart real-time subscription"),e.supabase.removeChannel(a)}}console.log("ðŸ”’ User not authenticated, clearing cart items and custom designs"),j([]),l([])},[g,h,p,q]);let r=async(a,b=1)=>{if(!g)return void f.toast.error("Please log in to add items to cart");try{n(!0),console.log("ðŸ›’ Adding to cart:",{variantId:a,quantity:b,userId:g.id});let{data:c,error:d}=await e.supabase.rpc("check_variant_stock",{variant_uuid:a,requested_quantity:b});if(d){console.error("Error checking stock:",d),f.toast.error("Unable to check stock availability");return}if(!c)return void f.toast.error("This item is currently out of stock");let h=i.find(b=>b.variant_id===a);if(h){let c=h.quantity+b;console.log("ðŸ“ˆ Updating existing item quantity:",{itemId:h.id,newQuantity:c});let{data:d}=await e.supabase.rpc("check_variant_stock",{variant_uuid:a,requested_quantity:c});if(!d)return void f.toast.error("Not enough stock available for requested quantity");j(a=>a.map(a=>a.id===h.id?{...a,quantity:c}:a));let{error:g}=await e.supabase.from("cart_items").update({quantity:c,updated_at:new Date().toISOString()}).eq("id",h.id);if(g)throw j(a=>a.map(a=>a.id===h.id?{...a,quantity:h.quantity}:a)),g}else{let{data:c,error:d}=await e.supabase.from("product_variants").select("product_id, color_hex").eq("id",a).single();if(d)throw d;console.log("âž• Adding new item to cart");let{data:f,error:h}=await e.supabase.from("cart_items").insert({user_id:g.id,variant_id:a,product_id:c.product_id,selected_color:c.color_hex,quantity:b}).select("id, user_id, product_id, variant_id, quantity, created_at, updated_at, selected_color, selected_size").single();if(h)throw h;f&&(console.log("âœ… New item added to cart:",f),j(a=>[f,...a]))}f.toast.success("Item added to cart"),console.log("ðŸŽ‰ Cart updated successfully")}catch(a){console.error("Error adding to cart:",a),f.toast.error("Failed to add item to cart"),p()}finally{n(!1)}},s=async a=>{if(!g)return void f.toast.error("Please log in to add custom designs to cart");try{n(!0),console.log("ðŸŽ¨ Adding custom design to cart:",a);let b=a=>a.replace(/<[^>]*>/g,"").trim(),{data:c,error:d}=await e.supabase.from("custom_designs").insert({user_id:g.id,design_image:a.design_image,answers:JSON.stringify((a.answers||[]).map(a=>({question:b(String(a?.question||"")),answer:b(String(a?.answer||""))}))),base_price:a.base_price,design_data:JSON.stringify(a.design_data),design_name:b(a.design_name),theme_name:a.theme_name?b(a.theme_name):void 0,tshirt_color:b(a.tshirt_color)}).select("id, design_name, design_image, tshirt_color, base_price, theme_name, answers, design_data, created_at").single();if(d)throw d;if(c){console.log("âœ… Custom design added:",c);let a={...c,design_data:c.design_data||{},answers:Array.isArray(c.answers)?c.answers:"string"==typeof c.answers?JSON.parse(c.answers):[]};l(b=>[a,...b])}f.toast.success("Custom design added to cart")}catch(a){console.error("Error adding custom design to cart:",a),f.toast.error("Failed to add custom design to cart")}finally{n(!1)}},t=async a=>{if(g)try{n(!0),console.log("ðŸ—‘ï¸ Removing from cart:",a);let b=[...i];j(b=>b.filter(b=>b.id!==a));let{error:c}=await e.supabase.from("cart_items").delete().eq("id",a);if(c)throw j(b),c;f.toast.success("Item removed from cart"),console.log("âœ… Item removed successfully")}catch(a){console.error("Error removing from cart:",a),f.toast.error("Failed to remove item")}finally{n(!1)}},w=async(a,b)=>{if(g&&!(b<1))try{n(!0),console.log("ðŸ”„ Updating quantity:",{itemId:a,quantity:b});let c=[...i];j(c=>c.map(c=>c.id===a?{...c,quantity:b}:c));let{error:d}=await e.supabase.from("cart_items").update({quantity:b,updated_at:new Date().toISOString()}).eq("id",a);if(d)throw j(c),d;console.log("âœ… Quantity updated successfully")}catch(a){console.error("Error updating quantity:",a),f.toast.error("Failed to update quantity")}finally{n(!1)}},x=async a=>{if(g)try{n(!0),console.log("ðŸ—‘ï¸ Removing custom design:",a);let b=[...k];l(b=>b.filter(b=>b.id!==a));let{error:c}=await e.supabase.from("custom_designs").delete().eq("id",a);if(c)throw l(b),c;f.toast.success("Custom design removed from cart"),console.log("âœ… Custom design removed successfully")}catch(a){console.error("Error removing custom design:",a),f.toast.error("Failed to remove custom design")}finally{n(!1)}},y=async()=>{if(g)try{n(!0),console.log("ðŸ§¹ Clearing cart for user:",g.id);let{error:a}=await e.supabase.from("cart_items").delete().eq("user_id",g.id);if(a)throw a;j([]),f.toast.success("Cart cleared"),console.log("âœ… Cart cleared successfully")}catch(a){console.error("Error clearing cart:",a),f.toast.error("Failed to clear cart")}finally{n(!1)}},z=i.reduce((a,b)=>a+b.quantity,0)+k.length;return(0,c.useEffect)(()=>{console.log("ðŸ“Š Cart count updated:",z)},[z]),(0,b.jsx)(v.Provider,{value:{cartItems:i,cartCount:z,customDesigns:k,addToCart:r,addCustomDesignToCart:s,removeFromCart:t,removeCustomDesign:x,updateQuantity:w,clearCart:y,isLoading:m},children:a})},"useCart",0,()=>{let a=(0,c.useContext)(v);if(!a)throw Error("useCart must be used within a CartProvider");return a}],35911)}];

//# sourceMappingURL=src_contexts_CartContext_tsx_fde7c8dd._.js.map