module.exports=[97433,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(35475),e=a.i(66718),f=a.i(99570),g=a.i(70430),h=a.i(91119),i=a.i(7554),j=a.i(50104),k=a.i(24050),l=a.i(77192),m=a.i(30553),n=a.i(7827),o=a.i(25152),p=a.i(92843),q="Tabs",[r,s]=(0,j.createContextScope)(q,[k.createRovingFocusGroupScope]),t=(0,k.createRovingFocusGroupScope)(),[u,v]=r(q),w=c.forwardRef((a,c)=>{let{__scopeTabs:d,value:e,onValueChange:f,defaultValue:g,orientation:h="horizontal",dir:i,activationMode:j="automatic",...k}=a,l=(0,n.useDirection)(i),[q,r]=(0,o.useControllableState)({prop:e,onChange:f,defaultProp:g});return(0,b.jsx)(u,{scope:d,baseId:(0,p.useId)(),value:q,onValueChange:r,orientation:h,dir:l,activationMode:j,children:(0,b.jsx)(m.Primitive.div,{dir:l,"data-orientation":h,...k,ref:c})})});w.displayName=q;var x="TabsList",y=c.forwardRef((a,c)=>{let{__scopeTabs:d,loop:e=!0,...f}=a,g=v(x,d),h=t(d);return(0,b.jsx)(k.Root,{asChild:!0,...h,orientation:g.orientation,dir:g.dir,loop:e,children:(0,b.jsx)(m.Primitive.div,{role:"tablist","aria-orientation":g.orientation,...f,ref:c})})});y.displayName=x;var z="TabsTrigger",A=c.forwardRef((a,c)=>{let{__scopeTabs:d,value:e,disabled:f=!1,...g}=a,h=v(z,d),j=t(d),l=D(h.baseId,e),n=E(h.baseId,e),o=e===h.value;return(0,b.jsx)(k.Item,{asChild:!0,...j,focusable:!f,active:o,children:(0,b.jsx)(m.Primitive.button,{type:"button",role:"tab","aria-selected":o,"aria-controls":n,"data-state":o?"active":"inactive","data-disabled":f?"":void 0,disabled:f,id:l,...g,ref:c,onMouseDown:(0,i.composeEventHandlers)(a.onMouseDown,a=>{f||0!==a.button||!1!==a.ctrlKey?a.preventDefault():h.onValueChange(e)}),onKeyDown:(0,i.composeEventHandlers)(a.onKeyDown,a=>{[" ","Enter"].includes(a.key)&&h.onValueChange(e)}),onFocus:(0,i.composeEventHandlers)(a.onFocus,()=>{let a="manual"!==h.activationMode;o||f||!a||h.onValueChange(e)})})})});A.displayName=z;var B="TabsContent",C=c.forwardRef((a,d)=>{let{__scopeTabs:e,value:f,forceMount:g,children:h,...i}=a,j=v(B,e),k=D(j.baseId,f),n=E(j.baseId,f),o=f===j.value,p=c.useRef(o);return c.useEffect(()=>{let a=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(a)},[]),(0,b.jsx)(l.Presence,{present:g||o,children:({present:c})=>(0,b.jsx)(m.Primitive.div,{"data-state":o?"active":"inactive","data-orientation":j.orientation,role:"tabpanel","aria-labelledby":k,hidden:!c,id:n,tabIndex:0,...i,ref:d,style:{...a.style,animationDuration:p.current?"0s":void 0},children:c&&h})})});function D(a,b){return`${a}-trigger-${b}`}function E(a,b){return`${a}-content-${b}`}C.displayName=B;var F=a.i(68114);let G=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(y,{ref:d,className:(0,F.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...c}));G.displayName=y.displayName;let H=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(A,{ref:d,className:(0,F.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...c}));H.displayName=A.displayName;let I=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(C,{ref:d,className:(0,F.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...c}));I.displayName=C.displayName;var J=a.i(74167),K=a.i(23292),L=a.i(40784),M=a.i(17201),N=a.i(14574);function O(){let{user:a,isLoading:i}=(0,d.useUser)(),[j,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)({fullName:a?.name||"",email:a?.email||""}),[n,o]=(0,c.useState)([]),[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)({name:"",street_address:"",city:"",state:"",postal_code:"",country:"United States",is_default:!1});(0,c.useEffect)(()=>{if(a){let b=async()=>{try{let{data:b,error:c}=await J.supabase.from("addresses").select("*").eq("user_id",a.id).order("is_default",{ascending:!1});if(c)throw c;o(b||[])}catch(a){console.error("Error fetching addresses:",a)}};(async()=>{try{let{data:b,error:c}=await J.supabase.from("profiles").select("full_name, avatar_url").eq("id",a.id).single();if(c)throw c;m({fullName:b.full_name||"",email:a.email})}catch(a){console.error("Error fetching profile data:",a)}})(),b()}},[a]);let v=a=>{let{name:b,value:c}=a.target;m(a=>({...a,[b]:c}))},x=async b=>{if(b.preventDefault(),a)try{k(!0);let{error:b}=await J.supabase.from("profiles").update({full_name:l.fullName.replace(/<[^>]*>/g,"").trim()}).eq("id",a.id);if(b)throw b;K.toast.success("Profile updated successfully")}catch(a){console.error("Error updating profile:",a),K.toast.error("Failed to update profile")}finally{k(!1)}},y=async a=>{a.preventDefault();let b=new FormData(a.currentTarget),c=b.get("newPassword");if(c!==b.get("confirmPassword"))return void K.toast.error("Passwords do not match");try{k(!0);let{error:b}=await J.supabase.auth.updateUser({password:c});if(b)throw b;K.toast.success("Password updated successfully"),a.target.reset()}catch(b){console.error("Error updating password:",b);let a=b instanceof Error?b.message:"Failed to update password";K.toast.error(a)}finally{k(!1)}},z=a=>{let{name:b,value:c,type:d,checked:e}=a.target;u(a=>({...a,[b]:"checkbox"===d?e:c}))},A=()=>{u({name:"",street_address:"",city:"",state:"",postal_code:"",country:"United States",is_default:!1}),s(null)},B=async b=>{if(b.preventDefault(),a)try{if(k(!0),t.is_default&&await J.supabase.from("addresses").update({is_default:!1}).eq("user_id",a.id),r){let a=a=>a.replace(/<[^>]*>/g,"").trim(),{error:b}=await J.supabase.from("addresses").update({name:a(t.name),street_address:a(t.street_address),city:a(t.city),state:a(t.state),postal_code:a(t.postal_code),country:a(t.country),is_default:t.is_default,updated_at:new Date().toISOString()}).eq("id",r.id);if(b)throw b;K.toast.success("Address updated successfully")}else{let b=a=>a.replace(/<[^>]*>/g,"").trim(),{error:c}=await J.supabase.from("addresses").insert({user_id:a.id,name:b(t.name),street_address:b(t.street_address),city:b(t.city),state:b(t.state),postal_code:b(t.postal_code),country:b(t.country),is_default:t.is_default});if(c)throw c;K.toast.success("Address added successfully")}let{data:b,error:c}=await J.supabase.from("addresses").select("*").eq("user_id",a.id).order("is_default",{ascending:!1});if(c)throw c;o(b||[]),q(!1),A()}catch(a){console.error("Error saving address:",a),K.toast.error("Failed to save address")}finally{k(!1)}},C=async b=>{if(a)try{let{error:a}=await J.supabase.from("addresses").delete().eq("id",b);if(a)throw a;o(n.filter(a=>a.id!==b)),K.toast.success("Address deleted successfully")}catch(a){console.error("Error deleting address:",a),K.toast.error("Failed to delete address")}},D=()=>{A(),q(!0)};return i?(0,b.jsx)("div",{children:"Loading..."}):(0,b.jsxs)(w,{defaultValue:"details",children:[(0,b.jsxs)(G,{className:"mb-4",children:[(0,b.jsx)(H,{value:"details",children:"Profile Details"}),(0,b.jsx)(H,{value:"addresses",children:"Addresses"}),(0,b.jsx)(H,{value:"security",children:"Security"})]}),(0,b.jsx)(I,{value:"details",children:(0,b.jsxs)(h.Card,{children:[(0,b.jsxs)(h.CardHeader,{children:[(0,b.jsx)(h.CardTitle,{children:"Personal Information"}),(0,b.jsx)(h.CardDescription,{children:"Update your personal details here."})]}),(0,b.jsxs)("form",{onSubmit:x,children:[(0,b.jsxs)(h.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"fullName",children:"Full Name"}),(0,b.jsx)(e.Input,{id:"fullName",name:"fullName",value:l.fullName,onChange:v,placeholder:"Your full name"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"email",children:"Email Address"}),(0,b.jsx)(e.Input,{id:"email",name:"email",value:l.email,onChange:v,placeholder:"Your email",disabled:!0}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Email cannot be changed. Contact support if you need to update it."})]})]}),(0,b.jsx)(h.CardFooter,{children:(0,b.jsx)(f.Button,{type:"submit",disabled:j,children:j?"Updating...":"Update Profile"})})]})]})}),(0,b.jsxs)(I,{value:"addresses",children:[(0,b.jsxs)(h.Card,{children:[(0,b.jsxs)(h.CardHeader,{className:"flex flex-row items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(h.CardTitle,{children:"Your Addresses"}),(0,b.jsx)(h.CardDescription,{children:"Manage your shipping and billing addresses."})]}),(0,b.jsx)(f.Button,{onClick:D,children:"Add New Address"})]}),(0,b.jsx)(h.CardContent,{children:0===n.length?(0,b.jsxs)("div",{className:"text-center py-6",children:[(0,b.jsx)(L.ShoppingBag,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,b.jsx)("h3",{className:"mt-2 text-sm font-semibold text-gray-900",children:"No addresses"}),(0,b.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"You haven't added any addresses yet."}),(0,b.jsx)("div",{className:"mt-6",children:(0,b.jsx)(f.Button,{onClick:D,children:"Add your first address"})})]}):(0,b.jsx)("div",{className:"grid gap-4",children:n.map(a=>(0,b.jsxs)("div",{className:`border p-4 rounded-md relative ${a.is_default?"bg-blue-50 border-blue-200":""}`,children:[a.is_default&&(0,b.jsx)("span",{className:"absolute top-2 right-2 bg-blue-100 text-blue-800 text-xs font-medium px-2 py-0.5 rounded",children:"Default"}),(0,b.jsxs)("div",{className:"flex justify-between items-start",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-medium",children:a.name}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:a.street_address}),(0,b.jsxs)("p",{className:"text-sm text-gray-600",children:[a.city,", ",a.state," ",a.postal_code]}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:a.country})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(f.Button,{variant:"outline",size:"sm",onClick:()=>{s(a),u({name:a.name,street_address:a.street_address,city:a.city,state:a.state,postal_code:a.postal_code,country:a.country,is_default:a.is_default}),q(!0)},children:"Edit"}),(0,b.jsx)(f.Button,{variant:"outline",size:"icon",onClick:()=>C(a.id),className:"text-red-500 hover:text-red-600",children:(0,b.jsx)(M.Trash,{className:"h-4 w-4"})})]})]})]},a.id))})})]}),(0,b.jsx)(N.Dialog,{open:p,onOpenChange:q,children:(0,b.jsxs)(N.DialogContent,{className:"sm:max-w-[500px]",children:[(0,b.jsx)(N.DialogHeader,{children:(0,b.jsx)(N.DialogTitle,{children:r?"Edit Address":"Add New Address"})}),(0,b.jsxs)("form",{onSubmit:B,children:[(0,b.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"name",children:"Address Name (e.g., Home, Work)"}),(0,b.jsx)(e.Input,{id:"name",name:"name",value:t.name,onChange:z,placeholder:"Home",required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"street_address",children:"Street Address"}),(0,b.jsx)(e.Input,{id:"street_address",name:"street_address",value:t.street_address,onChange:z,placeholder:"123 Main St",required:!0})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"city",children:"City"}),(0,b.jsx)(e.Input,{id:"city",name:"city",value:t.city,onChange:z,placeholder:"New York",required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"state",children:"State"}),(0,b.jsx)(e.Input,{id:"state",name:"state",value:t.state,onChange:z,placeholder:"NY",required:!0})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"postal_code",children:"Postal Code"}),(0,b.jsx)(e.Input,{id:"postal_code",name:"postal_code",value:t.postal_code,onChange:z,placeholder:"10001",required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"country",children:"Country"}),(0,b.jsx)(e.Input,{id:"country",name:"country",value:t.country,onChange:z,placeholder:"United States",required:!0})]})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("input",{type:"checkbox",id:"is_default",name:"is_default",checked:t.is_default,onChange:z,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,b.jsx)(g.Label,{htmlFor:"is_default",className:"font-normal",children:"Set as default address"})]})]}),(0,b.jsxs)(N.DialogFooter,{children:[(0,b.jsx)(f.Button,{type:"button",variant:"outline",onClick:()=>q(!1),children:"Cancel"}),(0,b.jsx)(f.Button,{type:"submit",disabled:j,children:j?"Saving...":r?"Update":"Add"})]})]})]})})]}),(0,b.jsx)(I,{value:"security",children:(0,b.jsxs)(h.Card,{children:[(0,b.jsxs)(h.CardHeader,{children:[(0,b.jsx)(h.CardTitle,{children:"Change Password"}),(0,b.jsx)(h.CardDescription,{children:"Update your password to keep your account secure."})]}),(0,b.jsxs)("form",{onSubmit:y,children:[(0,b.jsxs)(h.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"newPassword",children:"New Password"}),(0,b.jsx)(e.Input,{id:"newPassword",name:"newPassword",type:"password",placeholder:"New password",required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"confirmPassword",children:"Confirm New Password"}),(0,b.jsx)(e.Input,{id:"confirmPassword",name:"confirmPassword",type:"password",placeholder:"Confirm new password",required:!0})]})]}),(0,b.jsx)(h.CardFooter,{children:(0,b.jsx)(f.Button,{type:"submit",disabled:j,children:j?"Updating...":"Change Password"})})]})]})})]})}a.s(["default",()=>O],97433)}];

//# sourceMappingURL=app_dashboard_profile_page_tsx_0ff068e0._.js.map