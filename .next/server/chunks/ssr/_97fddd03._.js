module.exports=[77994,a=>{"use strict";var b=a.i(72131);function c(a){let c=b.useRef({value:a,previous:a});return b.useMemo(()=>(c.current.value!==a&&(c.current.previous=c.current.value,c.current.value=a),c.current.previous),[a])}a.s(["usePrevious",()=>c])},57417,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(91119),e=a.i(70430),f=a.i(7554),g=a.i(70121),h=a.i(50104),i=a.i(25152),j=a.i(77994),k=a.i(3688),l=a.i(30553),m="Switch",[n,o]=(0,h.createContextScope)(m),[p,q]=n(m),r=c.forwardRef((a,d)=>{let{__scopeSwitch:e,name:h,checked:j,defaultChecked:k,required:m,disabled:n,value:o="on",onCheckedChange:q,form:r,...s}=a,[t,w]=c.useState(null),x=(0,g.useComposedRefs)(d,a=>w(a)),y=c.useRef(!1),z=!t||r||!!t.closest("form"),[A=!1,B]=(0,i.useControllableState)({prop:j,defaultProp:k,onChange:q});return(0,b.jsxs)(p,{scope:e,checked:A,disabled:n,children:[(0,b.jsx)(l.Primitive.button,{type:"button",role:"switch","aria-checked":A,"aria-required":m,"data-state":v(A),"data-disabled":n?"":void 0,disabled:n,value:o,...s,ref:x,onClick:(0,f.composeEventHandlers)(a.onClick,a=>{B(a=>!a),z&&(y.current=a.isPropagationStopped(),y.current||a.stopPropagation())})}),z&&(0,b.jsx)(u,{control:t,bubbles:!y.current,name:h,value:o,checked:A,required:m,disabled:n,form:r,style:{transform:"translateX(-100%)"}})]})});r.displayName=m;var s="SwitchThumb",t=c.forwardRef((a,c)=>{let{__scopeSwitch:d,...e}=a,f=q(s,d);return(0,b.jsx)(l.Primitive.span,{"data-state":v(f.checked),"data-disabled":f.disabled?"":void 0,...e,ref:c})});t.displayName=s;var u=a=>{let{control:d,checked:e,bubbles:f=!0,...g}=a,h=c.useRef(null),i=(0,j.usePrevious)(e),l=(0,k.useSize)(d);return c.useEffect(()=>{let a=h.current,b=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(i!==e&&b){let c=new Event("click",{bubbles:f});b.call(a,e),a.dispatchEvent(c)}},[i,e,f]),(0,b.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:e,...g,tabIndex:-1,ref:h,style:{...a.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function v(a){return a?"checked":"unchecked"}var w=a.i(68114);let x=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(r,{className:(0,w.cn)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...c,ref:d,children:(0,b.jsx)(t,{className:(0,w.cn)("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));x.displayName=r.displayName;var y=a.i(99570),z=a.i(23292),A=a.i(35475),B=a.i(74167);function C(){let{user:a}=(0,A.useUser)(),[f,g]=(0,c.useState)(!1),[h,i]=(0,c.useState)({emailNotifications:!0,marketingEmails:!0,orderUpdates:!0});(0,c.useEffect)(()=>{a&&(async()=>{try{let{data:b,error:c}=await B.supabase.from("profiles").select("marketing_emails").eq("id",a.id).single();if(c)throw c;i(a=>({...a,marketingEmails:b.marketing_emails??!0}))}catch(a){console.error("Error fetching user settings:",a)}})()},[a]);let j=a=>{i(b=>({...b,[a]:!b[a]}))},k=async()=>{if(a)try{g(!0);let{error:b}=await B.supabase.from("profiles").update({marketing_emails:h.marketingEmails}).eq("id",a.id);if(b)throw b;z.toast.success("Settings saved successfully")}catch(a){console.error("Error saving settings:",a),z.toast.error("Failed to save settings")}finally{g(!1)}},l=async()=>{if(confirm("Are you sure you want to delete your account? This action cannot be undone."))try{a&&await B.supabase.from("profiles").delete().eq("id",a.id),await B.supabase.auth.signOut(),z.toast.success("Your account has been deleted")}catch(a){console.error("Error deleting account:",a),z.toast.error("Failed to delete account")}};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsx)(d.CardTitle,{children:"Email Preferences"}),(0,b.jsx)(d.CardDescription,{children:"Manage how you receive email notifications"})]}),(0,b.jsxs)(d.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(e.Label,{htmlFor:"emailNotifications",children:"Email Notifications"}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Receive notifications about your account activity"})]}),(0,b.jsx)(x,{id:"emailNotifications",checked:h.emailNotifications,onCheckedChange:()=>j("emailNotifications")})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(e.Label,{htmlFor:"marketingEmails",children:"Marketing Emails"}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Receive emails about new products and promotions"})]}),(0,b.jsx)(x,{id:"marketingEmails",checked:h.marketingEmails,onCheckedChange:()=>j("marketingEmails")})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(e.Label,{htmlFor:"orderUpdates",children:"Order Updates"}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Receive updates about your orders"})]}),(0,b.jsx)(x,{id:"orderUpdates",checked:h.orderUpdates,onCheckedChange:()=>j("orderUpdates")})]})]}),(0,b.jsx)(d.CardFooter,{children:(0,b.jsx)(y.Button,{onClick:k,disabled:f,children:f?"Saving...":"Save Preferences"})})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsx)(d.CardTitle,{children:"Danger Zone"}),(0,b.jsx)(d.CardDescription,{children:"Irreversible actions for your account"})]}),(0,b.jsx)(d.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("h3",{className:"font-medium",children:"Delete Account"}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Permanently delete your account and all associated data. This action cannot be undone."})]})}),(0,b.jsx)(d.CardFooter,{children:(0,b.jsx)(y.Button,{variant:"destructive",onClick:l,children:"Delete Account"})})]})]})}a.s(["default",()=>C],57417)}];

//# sourceMappingURL=_97fddd03._.js.map