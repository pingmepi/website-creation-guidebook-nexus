(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,99682,e=>{"use strict";var t=e.i(71645);function s(e){let s=t.useRef({value:e,previous:e});return t.useMemo(()=>(s.current.value!==e&&(s.current.previous=s.current.value,s.current.value=e),s.current.previous),[e])}e.s(["usePrevious",()=>s])},41507,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(15288),r=e.i(10204),i=e.i(81140),n=e.i(20783),c=e.i(30030),o=e.i(69340),l=e.i(99682),d=e.i(35804),u=e.i(48425),m="Switch",[h,f]=(0,c.createContextScope)(m),[p,x]=h(m),b=s.forwardRef((e,a)=>{let{__scopeSwitch:r,name:c,checked:l,defaultChecked:d,required:m,disabled:h,value:f="on",onCheckedChange:x,form:b,...v}=e,[g,k]=s.useState(null),C=(0,n.useComposedRefs)(a,e=>k(e)),w=s.useRef(!1),N=!g||b||!!g.closest("form"),[E=!1,P]=(0,o.useControllableState)({prop:l,defaultProp:d,onChange:x});return(0,t.jsxs)(p,{scope:r,checked:E,disabled:h,children:[(0,t.jsx)(u.Primitive.button,{type:"button",role:"switch","aria-checked":E,"aria-required":m,"data-state":j(E),"data-disabled":h?"":void 0,disabled:h,value:f,...v,ref:C,onClick:(0,i.composeEventHandlers)(e.onClick,e=>{P(e=>!e),N&&(w.current=e.isPropagationStopped(),w.current||e.stopPropagation())})}),N&&(0,t.jsx)(y,{control:g,bubbles:!w.current,name:c,value:f,checked:E,required:m,disabled:h,form:b,style:{transform:"translateX(-100%)"}})]})});b.displayName=m;var v="SwitchThumb",g=s.forwardRef((e,s)=>{let{__scopeSwitch:a,...r}=e,i=x(v,a);return(0,t.jsx)(u.Primitive.span,{"data-state":j(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:s})});g.displayName=v;var y=e=>{let{control:a,checked:r,bubbles:i=!0,...n}=e,c=s.useRef(null),o=(0,l.usePrevious)(r),u=(0,d.useSize)(a);return s.useEffect(()=>{let e=c.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(o!==r&&t){let s=new Event("click",{bubbles:i});t.call(e,r),e.dispatchEvent(s)}},[o,r,i]),(0,t.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...n,tabIndex:-1,ref:c,style:{...e.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function j(e){return e?"checked":"unchecked"}var k=e.i(75157);let C=s.forwardRef(({className:e,...s},a)=>(0,t.jsx)(b,{className:(0,k.cn)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...s,ref:a,children:(0,t.jsx)(g,{className:(0,k.cn)("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));C.displayName=b.displayName;var w=e.i(19455),N=e.i(46696),E=e.i(33277),P=e.i(41867);function S(){let{user:e}=(0,E.useUser)(),[i,n]=(0,s.useState)(!1),[c,o]=(0,s.useState)({emailNotifications:!0,marketingEmails:!0,orderUpdates:!0});(0,s.useEffect)(()=>{e&&(async()=>{try{let{data:t,error:s}=await P.supabase.from("profiles").select("marketing_emails").eq("id",e.id).single();if(s)throw s;o(e=>({...e,marketingEmails:t.marketing_emails??!0}))}catch(e){console.error("Error fetching user settings:",e)}})()},[e]);let l=e=>{o(t=>({...t,[e]:!t[e]}))},d=async()=>{if(e)try{n(!0);let{error:t}=await P.supabase.from("profiles").update({marketing_emails:c.marketingEmails}).eq("id",e.id);if(t)throw t;N.toast.success("Settings saved successfully")}catch(e){console.error("Error saving settings:",e),N.toast.error("Failed to save settings")}finally{n(!1)}},u=async()=>{if(confirm("Are you sure you want to delete your account? This action cannot be undone."))try{e&&await P.supabase.from("profiles").delete().eq("id",e.id),await P.supabase.auth.signOut(),N.toast.success("Your account has been deleted")}catch(e){console.error("Error deleting account:",e),N.toast.error("Failed to delete account")}};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(a.Card,{children:[(0,t.jsxs)(a.CardHeader,{children:[(0,t.jsx)(a.CardTitle,{children:"Email Preferences"}),(0,t.jsx)(a.CardDescription,{children:"Manage how you receive email notifications"})]}),(0,t.jsxs)(a.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(r.Label,{htmlFor:"emailNotifications",children:"Email Notifications"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Receive notifications about your account activity"})]}),(0,t.jsx)(C,{id:"emailNotifications",checked:c.emailNotifications,onCheckedChange:()=>l("emailNotifications")})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(r.Label,{htmlFor:"marketingEmails",children:"Marketing Emails"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Receive emails about new products and promotions"})]}),(0,t.jsx)(C,{id:"marketingEmails",checked:c.marketingEmails,onCheckedChange:()=>l("marketingEmails")})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(r.Label,{htmlFor:"orderUpdates",children:"Order Updates"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Receive updates about your orders"})]}),(0,t.jsx)(C,{id:"orderUpdates",checked:c.orderUpdates,onCheckedChange:()=>l("orderUpdates")})]})]}),(0,t.jsx)(a.CardFooter,{children:(0,t.jsx)(w.Button,{onClick:d,disabled:i,children:i?"Saving...":"Save Preferences"})})]}),(0,t.jsxs)(a.Card,{children:[(0,t.jsxs)(a.CardHeader,{children:[(0,t.jsx)(a.CardTitle,{children:"Danger Zone"}),(0,t.jsx)(a.CardDescription,{children:"Irreversible actions for your account"})]}),(0,t.jsx)(a.CardContent,{children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h3",{className:"font-medium",children:"Delete Account"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Permanently delete your account and all associated data. This action cannot be undone."})]})}),(0,t.jsx)(a.CardFooter,{children:(0,t.jsx)(w.Button,{variant:"destructive",onClick:u,children:"Delete Account"})})]})]})}e.s(["default",()=>S],41507)}]);