(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,92911,e=>{"use strict";var s=e.i(43476),r=e.i(71645),t=e.i(19455),a=e.i(50965),i=e.i(86536),d=e.i(22016),l=e.i(75157);let n=r.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:t,className:(0,l.cn)("w-full caption-bottom text-sm",e),...r})}));n.displayName="Table";let c=r.forwardRef(({className:e,...r},t)=>(0,s.jsx)("thead",{ref:t,className:(0,l.cn)("[&_tr]:border-b",e),...r}));c.displayName="TableHeader";let o=r.forwardRef(({className:e,...r},t)=>(0,s.jsx)("tbody",{ref:t,className:(0,l.cn)("[&_tr:last-child]:border-0",e),...r}));o.displayName="TableBody",r.forwardRef(({className:e,...r},t)=>(0,s.jsx)("tfoot",{ref:t,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...r})).displayName="TableFooter";let x=r.forwardRef(({className:e,...r},t)=>(0,s.jsx)("tr",{ref:t,className:(0,l.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...r}));x.displayName="TableRow";let m=r.forwardRef(({className:e,...r},t)=>(0,s.jsx)("th",{ref:t,className:(0,l.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...r}));m.displayName="TableHead";let h=r.forwardRef(({className:e,...r},t)=>(0,s.jsx)("td",{ref:t,className:(0,l.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...r}));h.displayName="TableCell",r.forwardRef(({className:e,...r},t)=>(0,s.jsx)("caption",{ref:t,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",e),...r})).displayName="TableCaption";let u=(0,e.i(25913).cva)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function p({className:e,variant:r,...t}){return(0,s.jsx)("div",{className:(0,l.cn)(u({variant:r}),e),...t})}var f=e.i(15288),j=e.i(33277),g=e.i(41867),b=e.i(46696);function y(){let{user:e}=(0,j.useUser)(),[l,u]=(0,r.useState)([]),[y,N]=(0,r.useState)(!0),[v,w]=(0,r.useState)(null);(0,r.useEffect)(()=>{e&&_()},[e]);let _=(0,r.useCallback)(async()=>{if(e)try{N(!0);let{data:s,error:r}=await g.supabase.from("orders").select(`
          *,
          order_items (*)
        `).eq("user_id",e.id).order("created_at",{ascending:!1});if(r)throw r;u((s||[]).map(e=>({...e,shipping_address:e.shipping_address||{}})))}catch(e){console.error("Error fetching orders:",e),b.toast.error("Failed to load orders")}finally{N(!1)}},[e]),C=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800";case"processing":return"bg-blue-100 text-blue-800";case"shipped":return"bg-purple-100 text-purple-800";case"delivered":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},S=e=>e.charAt(0).toUpperCase()+e.slice(1);return y?(0,s.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)("p",{children:"Loading your orders..."})})}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"Your Orders"}),(0,s.jsx)(t.Button,{variant:"outline",asChild:!0,children:(0,s.jsxs)(d.default,{href:"/shop",children:[(0,s.jsx)(a.ShoppingBag,{className:"mr-2 h-4 w-4"}),"Continue Shopping"]})})]}),0===l.length?(0,s.jsxs)("div",{className:"text-center py-12 border rounded-md bg-gray-50",children:[(0,s.jsx)(a.ShoppingBag,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,s.jsx)("h3",{className:"mt-4 text-lg font-medium",children:"No orders yet"}),(0,s.jsx)("p",{className:"mt-1 text-gray-500",children:"After you place an order, it will appear here"}),(0,s.jsx)(t.Button,{className:"mt-6",asChild:!0,children:(0,s.jsx)(d.default,{href:"/shop",children:"Browse Collection"})})]}):(0,s.jsxs)(f.Card,{children:[(0,s.jsx)(f.CardHeader,{children:(0,s.jsx)(f.CardTitle,{children:"Recent Orders"})}),(0,s.jsx)(f.CardContent,{children:(0,s.jsxs)(n,{children:[(0,s.jsx)(c,{children:(0,s.jsxs)(x,{children:[(0,s.jsx)(m,{children:"Order #"}),(0,s.jsx)(m,{children:"Date"}),(0,s.jsx)(m,{children:"Items"}),(0,s.jsx)(m,{children:"Amount"}),(0,s.jsx)(m,{children:"Status"}),(0,s.jsx)(m,{})]})}),(0,s.jsx)(o,{children:l.map(e=>(0,s.jsxs)(x,{children:[(0,s.jsx)(h,{className:"font-medium",children:e.order_number}),(0,s.jsx)(h,{children:new Date(e.created_at).toLocaleDateString()}),(0,s.jsxs)(h,{children:[e.order_items?.length||0," items"]}),(0,s.jsxs)(h,{children:["₹",e.total_amount.toFixed(2)]}),(0,s.jsx)(h,{children:(0,s.jsx)(p,{className:C(e.status),children:S(e.status)})}),(0,s.jsx)(h,{children:(0,s.jsxs)(t.Button,{variant:"ghost",size:"sm",onClick:()=>w(e),children:[(0,s.jsx)(i.Eye,{className:"h-4 w-4 mr-1"}),"View Details"]})})]},e.id))})]})})]}),v&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,s.jsxs)(f.Card,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,s.jsx)(f.CardHeader,{children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)(f.CardTitle,{children:["Order Details - ",v.order_number]}),(0,s.jsx)(t.Button,{variant:"ghost",size:"sm",onClick:()=>w(null),children:"×"})]})}),(0,s.jsxs)(f.CardContent,{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium",children:"Order Date"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:new Date(v.created_at).toLocaleDateString()})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium",children:"Status"}),(0,s.jsx)(p,{className:C(v.status),children:S(v.status)})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium mb-2",children:"Shipping Address"}),(0,s.jsxs)("div",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded",children:[(0,s.jsx)("p",{children:String(v.shipping_address.name||"")}),(0,s.jsx)("p",{children:String(v.shipping_address.street_address||"")}),(0,s.jsxs)("p",{children:[String(v.shipping_address.city||""),", ",String(v.shipping_address.state||"")," ",String(v.shipping_address.postal_code||"")]}),(0,s.jsx)("p",{children:String(v.shipping_address.country||"")})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium mb-2",children:"Order Items"}),(0,s.jsx)("div",{className:"space-y-2",children:v.order_items?.map(e=>(0,s.jsxs)("div",{className:"flex justify-between items-center py-2 border-b",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"font-medium",children:["Product #",e.product_id]}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["Quantity: ",e.quantity]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("p",{className:"font-medium",children:["₹",e.total_price.toFixed(2)]}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["₹",e.unit_price.toFixed(2)," each"]})]})]},e.id))})]}),(0,s.jsx)("div",{className:"border-t pt-4",children:(0,s.jsxs)("div",{className:"flex justify-between items-center font-medium text-lg",children:[(0,s.jsx)("span",{children:"Total Amount"}),(0,s.jsxs)("span",{children:["₹",v.total_amount.toFixed(2)]})]})})]})]})})]})}e.s(["default",()=>y],92911)}]);